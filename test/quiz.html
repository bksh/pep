<!DOCTYPE html>
<html>
  <head>
    <title>Pep test - Quiz</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- This is what you would include for Pep. -->
    <script src="../src/core/pep.js"></script>
    <script src="../src/core/sequence.js"></script>
    <script src="../src/core/document.js"></script>
    <script src="../src/core/actions.js"></script>
    <script src="../src/core/generate.js"></script>
    <script src="../src/handlers/quiz.js" data-pep="quiz"></script>
    <style>.if-pep-quiz { display: none; }</style>

    <!-- Resources to enable the test - not relevant for implementations.-->
    <link rel="stylesheet" href="resources/test.css" />
    <script src="resources/conventions.js"></script>
    <script>window.onload = function () { Pep.attach(document); };</script>
  </head>
  <body>
    <h1>Pep test - Quiz</h1>

    <p>
      Certain reading systems will recognize quizzes in book content
      and provide an interactive experience for completing them
      and obtaining a score.
    </p>

    <h2>Showing and hiding quiz-related content</h2>

    <p>
      First, always have a rule like this one in your stylesheet:
    </p>

    <pre><code>.if-pep-quiz { display: none; }</code></pre>

    <p>
      Now, when you want to show an element when quizzes are
      <strong>enabled</strong> by a supporting reading system, use that
      class anywhere in your document.
    </p>

    <pre><code>&lt;p class="if-pep-quiz"&gt;Here's a quiz!&lt;/p&gt;</code></pre>

    <p>
      Here's what happens: if Pep is enabled and the 'quiz' convention
      is registered with Pep, the <code>if-pep-quiz</code> class is
      removed from all elements. (Pep assumes this will 'unhide'
      each such element, without side effects.)
    </p>

    <p>
      When you want to show an element only in readers
      that <strong>don't</strong> support quizzes, use the inverse class:
    </p>

    <pre><code>&lt;p class="unless-pep-quiz"&gt;No quiz for you.&lt;/p&gt;</code></pre>

    <p>
      Elements with a class of 'unless-pep-quiz' will be
      <strong>removed from the document</strong> if Pep is enabled
      and the 'quiz' convention is registered with Pep. As always with Pep,
      the document is structured and styled so that it will degrade
      appropriately in no-JavaScript/no-Pep situations.
    </p>

    <h2>The quiz convention</h2>

    <p>
      A quiz is just an ordinary HTML form with a special class. That
      class is <code>pep-quiz</code>. Here is a bare bones, fully working quiz:
    </p>

    <div class="convention">

<!-- CONVENTION: START -->
<form class="pep-quiz">
  <p>What's the name of this JavaScript library?</p>
  <input type="text" data-pep-quiz-answer="pep" />
  <input type="submit" value="Check your answer" />
</form>
<!-- CONVENTION: END -->

    </div>

    <p>
      This is the minimal form. The popup, the close button and the
      "scoreboard" summary will all be generated by the Pep handler.
    </p>

    <p>
      Note these vital pieces:
    </p>
    <ul>
      <li>
        A <code>&lt;form&gt;</code> with a class of <code>pep-quiz</code>.
      </li>
      <li>
        A text <code>&lt;input&gt;</code> with a <code>data-pep-quiz-answer</code>
        attribute that contains the correct value.
      </li>
      <li>
        A submit button.
      </li>
    </ul>

    <p>
      Now, when the quiz is submitted, Pep will look at all of the elements
      with a <code>data-pep-quiz-answer</code> attribute and check that their
      values match the attribute.
    </p>


    <h2>Types of quiz answers</h2>


    <p>
      <strong>This is important:</strong> When you have two or more
      questions in your quiz, each question must be in its own
      <code>&lt;fieldset&gt;</code>.
    </p>

    <p>
      The range of available answer field types should be pretty familiar.
      The most common quiz types are multiple-choice, and you can use
      <code>&lt;input type="radio"&gt;</code> or
      <code>&lt;input type="checkbox"&gt;</code> or
      <code>&lt;select&gt;</code> to make those quizzes.
    </p>
    <p>
      In fact you can make any element a multiple choice answer by
      giving it a <code>data-pep-send="select"</code> attribute.
    </p>
    <p>
      You can also use <code>&lt;input type="text"&gt;</code> and
      <code>&lt;textarea&gt;</code> to match strings as shown in the first
      example.  Obviously, the string must match precisely (after trimming
      leading and trailing spaces), so this is not a common quiz answer field
      type. (Also note: The field value is converted to lowercase if the
      answer is all-lowercase. For case-sensitive answers, include at least
      one uppercase character.)
    </p>
    <p>
      For radio buttons, checkboxes and send-select elements, you
      can flag that a choice is correct simply by giving it a blank
      <code>data-pep-quiz-answer</code> attribute. For text fields and
      and select dropdowns, you should give the actual value you expect
      for this attribute, ie <code>data-pep-quiz-answer="foo"</code>.
    </p>
    <p>
      Let's look at a quiz that uses every type of field:
    </p>


    <div class="convention">

<!-- CONVENTION: START -->
<form class="pep-quiz" data-pep-quiz-stylesheet="resources/quiz-generic.css">
  <fieldset>
    <p>English uses which alphabet?</p>
    <label><input type="radio" />Arabic</label>
    <label><input type="radio" />Cyrillic</label>
    <label><input type="radio" />Greek</label>
    <label><input type="radio" />Hebrew</label>
    <label><input type="radio" data-pep-quiz-answer />Latin</label>
  </fieldset>
  <fieldset>
    <label>
      How many characters are in the alphabet?
      <select data-pep-quiz-answer="26">
        <option></option>
        <option>22</option>
        <option>26</option>
        <option>256</option>
      </select>
    </label>
  </fieldset>
  <fieldset>
    <p>Which of these characters is a vowel?</p>
    <label><input type="checkbox" data-pep-quiz-answer />A</label>
    <label><input type="checkbox" />B</label>
    <label><input type="checkbox" />C</label>
    <label><input type="checkbox" />D</label>
    <label><input type="checkbox" data-pep-quiz-answer />E</label>
    <label><input type="checkbox" />F</label>
  </fieldset>
  <fieldset>
    <p>Which of these characters is not in the alphabet?</p>
    <div data-pep-send="select" data-pep-quiz-answer>Ж</div>
    <div data-pep-send="select">W</div>
    <div data-pep-send="select">H</div>
  </fieldset>
  <fieldset>
    <label>
      What is the first character of the alphabet?
      <input type="text" max-length="1" size="1" data-pep-quiz-answer="a" />
    </label>
  </fieldset>
  <fieldset>
    <label>
      Write the last three letters of the alphabet, separated by spaces:
      <textarea data-pep-quiz-answer="x y z"></textarea>
    </label>
    <input type="submit" value="Check your answers!" />
  </fieldset>
</form>
<!-- CONVENTION: END -->

    </div>

    <h2>Additional quiz options</h2>

    <p>
      A quiz form can also take a few special attributes to tailor
      its appearance and behavior. Currently they are:
    </p>
    <ul>
      <li>
        <code>data-pep-quiz-name</code> -
        the ‘name’ of the quiz, which the reading system may use throughout
        its UI. (Default: 'Quiz'.)
      </li>
      <li>
        <code>data-pep-quiz-stylesheet</code> -
        a stylesheet included with your book that customizes the display of
        the quiz. (Default: the reading system <em>may</em> supply its own
        quiz stylesheet if this attribute is absent.)
      </li>
    </ul>

    <h2>Focusing on one question</h2>

    <p>
      In the preceding example, all the questions are shown together, with
      a submit button at the end. You might instead choose to show one question
      at a time. This is a simple matter of two new rules in your stylesheet:
    </p>

<pre><code>
.pep-quiz fieldset { display: none; }<br />
.pep-quiz fieldset.pep-quiz-focus { display: block; }
</code></pre>

    <p>
      Pep will control the assignment of the <code>pep-quiz-focus</code>
      class to the current question. To move from one question to the next,
      of course, you need a sender that sends a <code>next</code> action
      to the quiz.
    </p>

    <p>
      Here's an example:
    </p>

    <div class="convention">

<!-- CONVENTION: START -->
<form class="pep-quiz" data-pep-quiz-stylesheet="resources/quiz-math.css">
  <fieldset>
    <p>Whose theorem provides the hypotenuse of a triangle?</p>
    <label><input type="radio" />Hippocrates</label>
    <label><input type="radio" />Isoceles</label>
    <label><input type="radio" data-pep-quiz-answer />Pythagorus</label>
    <button data-pep-send="next">Continue</button>
  </fieldset>
  <fieldset>
    <p>What is 2^3?</p>
    <div data-pep-send="select next" data-pep-quiz-answer>8</div>
    <div data-pep-send="select next">12</div>
    <div data-pep-send="select next">16</div>
  </fieldset>
</form>
<!-- CONVENTION: END -->

    </div>

    <p>
      You can see, in the second question, that we chained the
      <code>next</code> action to the existing <code>select</code>, thereby
      avoiding the need for an additional button.
    </p>

    <h2>Scoring</h2>
    <p>
      - styling the generated scoreboard
      - using your own scoreboard
      - using quiz data elsewhere
      - showing wrong answers
    </p>

    <p>
      On submit, each fieldset is assigned an attribute of
      <code>data-pep-quiz-marked="correct|incorrect"</code>.
    </p>

    <h2>Quiz senders</h2>
    <p>
    - reset
    - close
    - jump
    - start
    - select
    - check
    - next
    - previous
    </p>


    <h2>Some interesting quiz examples</h2>

<!-- CONVENTION: START -->
<form
  id="quizNascar"
  class="pep-quiz"
  data-pep-quiz-name="Quiz: The Greatest NASCAR Drivers of All Time"
  data-pep-quiz-stylesheet="resources/quiz-nascar.css"
>
  <fieldset>
    <p>
      How much did U.S. corporations spend on auto racing
      sponsorships in 2006?
    </p>
    <div data-pep-send="select wait(200) next">
      About $500 million
    </div>
    <div data-pep-send="select wait(200) next" data-pep-quiz-answer>
      About $3 billion
    </div>
    <div data-pep-send="select wait(200) next">
      About $6 billion
    </div>
  </fieldset>
  <fieldset>
    <label>
      In what year did <b>Richard Petty</b> win 10 NASCAR races in a row?
      <input type="text" data-pep-quiz-answer="1967" />
    </label>
    <button class="if-pep-quiz" data-pep-send="submit">
      Check your answers!
    </button>
  </fieldset>
</form>
<button class="if-pep-quiz" data-pep-send="#quizNascar trigger">
  Take the NASCAR quiz!
</button>
<!-- CONVENTION: END -->

    </div>
  </body>

  <script>InspectConventions();</script>
</html>
