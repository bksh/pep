<!DOCTYPE html>
<html>
  <head>
    <title>Pep test - Shell game</title>
    <!-- This is what you would include for Pep. -->
    <script src="../src/core/pep.js"></script>
    <script src="../src/core/document.js"></script>
    <script src="../src/core/actions.js"></script>
    <script src="../src/core/generate.js"></script>

    <!-- Resources to enable the test - not relevant for implementations.-->
    <link rel="stylesheet" href="resources/test.css" />
    <script src="resources/conventions.js"></script>
    <script>window.onload = function () { Pep.attach(document); };</script>

    <style>
      #shells {
        background: white;
        padding: 75px 15px 15px;
        overflow: hidden;
        margin-bottom: 15px;
      }
      #shells > div {
        position: relative;
        width: 140px;
        height: 80px;
        float: left;
        margin: 0 15px;
      }
      .shell {
        position: absolute;
        width: 100%;
        height: 100%;
        border-top-left-radius: 80px;
        border-top-right-radius: 80px;
        background: -webkit-radial-gradient(30% 30%, circle closest-corner, #C77, #933);
        border: 1px solid #811;
        -webkit-transition: -webkit-transform 300ms ease-in-out;
      }
      .lift .shell {
        -webkit-transform: translateY(-60px);
      }
      .stone {
        position: absolute;
        background: -webkit-radial-gradient(70% 70%, circle closest-corner, #555, #444);
        border: 1px solid #222;
        left: 60px;
        bottom: 0px;
        width: 20px;
        height: 20px;
        border-radius: 20px;
        border-bottom-left-radius: 18px;
        border-bottom-right-radius: 17px;
      }
      #btnPlay {
        padding: 20px;
        font-family: Helvetica Neue, sans-serif;
        font-weight: bold;
        text-align: center;
        border-radius: 3px;
        background: #344D56;
        color: #EEF;
        letter-spacing: 0.1em;
      }
      #instructions, #correct {
        padding: 20px;
        text-align: center;
      }
      #instructions, .shuffled #btnPlay, #correct { display: none; }
      .prompt #instructions, .shuffled.won #correct { display: block; }

      /* THESE ARE THE SHELL ANIMATIONS WHEN THE GAME IS PLAYED */
      @-webkit-keyframes shuffled1 {
        from { -webkit-transform: translateX(0px); }
        33% { -webkit-transform: translateX(340px); }
        66% { -webkit-transform: translateX(340px); }
        to { -webkit-transform: translateX(170px); }
      }
      .shuffled #box1 {
        -webkit-animation: shuffled1 1500ms 1 ease-out;
        -webkit-transform: translateX(170px);
      }
      @-webkit-keyframes shuffled2 {
        from { -webkit-transform: translateX(0px); }
        33% { -webkit-transform: translateX(-170px); }
        66% { -webkit-transform: translateX(-170px); }
        to { -webkit-transform: translateX(170px); }
      }
      .shuffled #box2 {
        -webkit-animation: shuffled2 1500ms 1 ease-in-out;
        -webkit-transform: translateX(170px);
      }
      @-webkit-keyframes shuffled3 {
        from { -webkit-transform: translateX(0px); }
        33% { -webkit-transform: translateX(-170px); }
        66% { -webkit-transform: translateX(-170px); }
        to { -webkit-transform: translateX(-340px); }
      }
      .shuffled #box3 {
        -webkit-animation: shuffled3 1500ms 1 ease-in;
        -webkit-transform: translateX(-340px);
      }
    </style>
  </head>
  <body>
    <h1>Pep test - Shell game</h1>

    <div class="convention">

<!-- EXAMPLE: START -->
<div id="game">
  <div id="shells">
    <div id="box1" x-pep-send="
      suspend
      #box1 class(lift 500ms) wait(500ms)
      #game class(shuffled remove) class(prompt remove)
      resume
    ">
      <div class="shell"></div>
    </div>
    <div id="box2" x-pep-send="
      suspend
      #game class(prompt remove) class(won add)
      #box2 class(lift 1000ms)
      wait(500ms)
      #game class(won remove) class(shuffled remove)
      resume
    ">
      <div class="stone"></div>
      <div class="shell"></div>
    </div>
    <div id="box3" x-pep-send="
      suspend
      #box3 class(lift 500ms) wait(500ms)
      #game class(shuffled remove) class(prompt remove)
      resume
    ">
      <div class="shell"></div>
    </div>
    <br style="clear: left;" />
  </div>
  <div id="btnPlay" x-pep-send="
    suspend
    #box2 class(lift 500) wait(500)
    #game class(shuffled)
    wait(1500)
    #game class(prompt)
    resume
  ">PLAY</div>
  <div id="instructions">Click the shell with the stone.</div>
  <div id="correct">You found the stone!</div>
</div>
<!-- EXAMPLE: END -->

    </div>
  </body>
  <script>InspectConventions();</script>
</html>
